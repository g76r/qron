<!DOCTYPE html>
<!--
 Copyright 2012-2014 Hallowyn and others.
 This file is part of qron, see <http://qron.eu/>.
 Qron is free software: you can redistribute it and/or modify
 it under the terms of the GNU Affero General Public License as published by
 the Free Software Foundation, either version 3 of the License, or
 (at your option) any later version.
 Qron is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 GNU Affero General Public License for more details.
 You should have received a copy of the GNU Affero General Public License
 along with qron. If not, see <http://www.gnu.org/licenses/>.
-->
<?include:header.html?>

      <div class="row">
        <div class="col-md-12">
          <h2>Task <?value:11?></h2>
          <p><a class="btn btn-danger" href="requestform?taskid=<?value:11?>"><i class="icon-play"></i> Request task execution</a>
          <a class="btn btn-danger" href="do?event=enableTask&amp;enable=false&amp;taskid=<?value:11?>"><i class="icon-block"></i> Disable task</a>
          <a class="btn btn-warning" href="do?event=enableTask&amp;enable=true&amp;taskid=<?value:11?>"><i class="icon-block"></i> Enable task</a>
          <a class="btn btn-info" href="../rest/txt/log/all/v1?regexp=^[^ ]* <?value:11?>[/:]" target="_blank"><i class="icon-file-text"></i> Task log</a>
          <?rawvalue:webconsole.customactions.taskdetail:?>
          <p>All durations and delays are in seconds.
        </div>
      </div>
      <div class="row">
        <div class="col-md-8">
          <h3>Task Description</h3>
          <p><a class="btn btn-info" href="tasks.html">Tasks page &raquo;</a>
          <a class="btn btn-info" href="index.html">Overview page &raquo;</a>
          <p><table class="table table-condensed table-hover">
            <tr><th>Task id (fully qualified with group id)</th><td><?value:11?></td></tr>
            <tr><th>Task label</th><td><?value:2?></td></tr>
            <tr><th>Task group id</th><td><?value:1?></td></tr>
            <tr><th>Workflow Task (for subtasks)</th><td><?=%{=ifneq:%31::<a href="taskdoc.html?taskid=%31">%31</a>}?></td></th>
            <tr><th>Additional information</th><td><?value:33:?></td></tr>
            <tr><th>Triggers (scheduling)</th><td><?value:28:?></td></tr>
            <tr><th>Minimum expected duration</th><td><?value:23:?></td></tr>
            <tr><th>Maximum expected duration</th><td><?value:24:?></td></tr>
            <tr><th>Maximum duration before abort</th><td><?=%{=ifneq:%27::<i class="icon-fire"></i>&nbsp;%27:}?></td></tr>
          </table>
        </div>
        <div class="col-md-4">
          <h3>Task Status</h3>
          <p><a class="btn invisible" href="#">&nbsp;</a>
          <p><table class="table table-condensed table-hover">
             <tr><th>Enabled</th><td><?=%{=ifneq:%29:true:<i class="icon-block"></i>&nbsp;false}?></td></tr>
             <tr><th>Last execution status</th><td><?value:19:?></td></tr>
             <tr><th>Last execution duration</th><td><?value:26:?></td></tr>
             <tr><th>Last execution instance</th><td><?=%{=ifneq:%32::%32&nbsp;<span class="label label-info" title="Last task instance log"><a target="_blank" href="../rest/txt/log/all/v1?filter=%11/%32"><i class="icon-file-text"></i></a></span>}?></td></tr>
             <tr><th>Next execution</th><td><?value:10:?></td></tr>
             <tr><th>Currently running instances</th><td><?=%{=ifneq:%13:0:<i class="icon-play"></i>&nbsp;%13:%13}?>/<?value:12:?></td></tr>
          </table>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <h3>Task Parameters and Resources</h3>
          <p><a class="btn btn-info" href="tasks.html">Tasks page &raquo;</a>
          <a class="btn btn-info" href="resources.html">Resources page &raquo;</a>
          <p><table class="table table-condensed table-hover">
            <tr><th>Execution mean</th><td><?value:3:?></td></tr>
            <tr><th>Execution target (host or cluster)</th><td><?value:5:?></td></tr>
            <tr><th>Command</th><td><?value:4:?></td></tr>
            <tr><th>Configuration parameters</th><td><?value:7:?></td></tr>
            <tr><th>Request-time overridable parameters</th><td><?value:25:?></td></tr>
            <tr><th>System environment variables set (setenv)</th><td><?value:21:?></td></tr> <!-- TODO also display inherited setenv -->
            <tr><th>System environment variables unset (unsetenv)</th><td><?value:22:?></td></tr> <!-- TODO also display inherited setenv -->
            <tr><th>Consumed resources</th><td><?value:8:?></td></tr>
            <tr><th>Maximum instances count at a time</th><td><?value:12:?></td></tr>
            <tr><th>Onstart events</th><td><?value:14:?></td></tr>
            <tr><th>Onsuccess events</th><td><?value:15:?></td></tr>
            <tr><th>Onfailure events</th><td><?value:16:?></td></tr>
          </table>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <h3>Task Workflow Diagram</h3>
          <p><a class="btn btn-primary" href="../rest/svg/tasks/workflow/v1?taskid=<?value:11?>"><i class="icon-file"></i> SVG</a>
          <a class="btn btn-primary" href="../rest/dot/tasks/workflow/v1?taskid=<?value:11?>"><i class="icon-file"></i> DOT</a>
          <div id="workflowDiagram" style="display: table; margin: 0 auto;">
            <noscript><img src="../rest/svg/tasks/workflow/v1?taskid=<?value:11?>" alt="Task Workflow Diagram" class="img-responsive"/></noscript>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <h3>Raw Task Configuration</h3>
          <p><a class="btn btn-primary" target="_blank" href="../rest/pf/task/config/v1?taskid=<?value:11?>"><i class="icon-file"></i> PF</a>
          <pre><?=%{=rawvalue:pfconfig:h}?></pre>
        </div>
      </div>

<?include:common-scripts.html?>
    <script type="text/javascript">
$(document).ready(function(){
  $('#workflowDiagram').load('../rest/svg/tasks/workflow/v1?taskid=<?value:11?>', function() {
    $("a").not("[xlink\\:title='']").each(function() {
      this.setAttributeNS('http://www.w3.org/1999/xlink','href','taskdoc.html?taskid='+$(this).attr('xlink:title'));
    });
  });
});
    </script>
<?include:footer.html?>
