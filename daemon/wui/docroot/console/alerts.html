<!DOCTYPE html>
<!--
 Copyright 2012-2016 Hallowyn and others.
 This file is part of qron, see <http://qron.eu/>.
 Qron is free software: you can redistribute it and/or modify
 it under the terms of the GNU Affero General Public License as published by
 the Free Software Foundation, either version 3 of the License, or
 (at your option) any later version.
 Qron is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 GNU Affero General Public License for more details.
 You should have received a copy of the GNU Affero General Public License
 along with qron. If not, see <http://www.gnu.org/licenses/>.
-->
<?include:header.html?>

      <div class="row">
        <div class="col-md-12">
          <h2>Current Stateful<a class="help" href="user-manual.html#stateful-alerts"><span class="icon-help-circled"/></a> Alerts</h2>
          <form class="form-inline" action="<?value:!pathtoroot?>../do/v1/alerts/raise/" type="GET">
          <a class="btn btn-primary" href="../rest/v1/alerts/stateful_list.csv"><i class="icon-file-excel"></i> CSV</a>
          <a class="btn btn-primary" href="../rest/v1/alerts/stateful_list.html"><i class="icon-file-html"></i> HTML</a>
          <a class="btn btn-info" href="events.html">Events page &raquo;</a>
          <span class="pull-right">
              <input class="input-large" name="alertid" type="text" placeholder="alert name" />
              <button class="btn btn-danger" type="submit" value="submit"><i class="icon-bell"></i> Raise alert</button>
          </span>
          </form>
          <p><?view:statefulalerts?>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <h2>Recently Emitted Alerts</h2>
          <p>The table shows both stateful<a class="help" href="user-manual.html#stateful-alerts"><span class="icon-help-circled"/></a> alerts when they are actually emitted and one-shot<a class="help" href="user-manual.html#one-shot-alerts"><span class="icon-help-circled"/></a> alerts.
          <form class="form-inline" action="<?value:!pathtoroot?>../do/v1/alerts/emit/" type="GET">
          <a class="btn btn-primary" href="../rest/v1/alerts/last_emitted.csv"><i class="icon-file-excel"></i> CSV</a>
          <a class="btn btn-primary" href="../rest/v1/alerts/last_emitted.html"><i class="icon-file-html"></i> HTML</a>
          <a class="btn btn-info" href="events.html">Events page &raquo;</a>
          <span class="pull-right">
              <input class="input-large" name="alertid" type="text" placeholder="alert name" />
              <button class="btn btn-danger" type="submit" value="submit"><i class="icon-bell"></i> Emit one-shot alert</button>
          </span>
          </form>
          <p><?view:lastemittedalerts?>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <h2>Gridboards<a class="help" href="user-manual.html#gridboards"><span class="icon-help-circled"/></a></h2>
          <p><a class="btn btn-primary" href="../rest/v1/gridboards/list.csv"><i class="icon-file-excel"></i> CSV</a>
          <a class="btn btn-primary" href="../rest/v1/gridboards/list.html"><i class="icon-file-html"></i> HTML</a>
          <p><?view:gridboards?>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <h2>Alerts Subscriptions<a class="help" href="user-manual.html#alerts-subscriptions"><span class="icon-help-circled"/></a></h2>
          <p>For every emitted alert, subscriptions are evaluated from top to bottom.
           If several subsctiptions match an alert, it is emitted several times, one
           per matching subscription.
           If a stop subscription matches an alert, next subscriptions are not evaluated
           regardless if they match the alert or not.
          <p><a class="btn btn-primary" href="../rest/v1/alerts_subscriptions/list.csv"><i class="icon-file-excel"></i> CSV</a>
          <a class="btn btn-primary" href="../rest/v1/alerts_subscriptions/list.html"><i class="icon-file-html"></i> HTML</a>
          <p><?view:alertsubscriptions?>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <h2>Tasks Parameters Related to Alerting<a class="help" href="user-manual.html#alerts-fine-tuning"><span class="icon-help-circled"/></a></h2>
          <p>Durations and delays are in seconds.
          <p><a class="btn btn-primary" href="../rest/csv/tasks/list/v1"><i class="icon-file-excel"></i> CSV</a>
          <a class="btn btn-primary" href="../rest/html/tasks/list/v1"><i class="icon-file-html"></i> HTML</a>
          <a class="btn btn-info" href="tasks.html">Tasks page &raquo;</a>
          <p><?view:tasksalerts?>
        </div>
      </div>
      <div class="row">
        <div class="col-md-8">
          <h2>Alert Parameters<a class="help" href="user-manual.html#alerts-fine-tuning"><span class="icon-help-circled"/></a></h2>
          <p>Following parameters are shared among the whole alerting system,
          some maybe useful only for one alert channel, other maybe used by all
          of them, and their value are inherited by alert subscriptions (i.e.
          parameters not overriden on an alert subscription basis are set as the
          following ones).
          <p><a class="btn btn-primary" href="../rest/v1/alert_params/list.csv"><i class="icon-file-excel"></i> CSV</a>
          <a class="btn btn-primary" href="../rest/v1/alert_params/list.html"><i class="icon-file-html"></i> HTML</a>
          <p><?view:alertparams?>
        </div>
        <div class="col-md-4 hidden-xs hidden-sm">
          <h2>Alert Channels<a class="help" href="user-manual.html#alert-channels"><span class="icon-help-circled"/></a></h2>
          <p>Following channels can be used in alert subscriptions.
          <p><?view:alertchannels?>
        </div>
      </div>
      <div class="row">
        <div class="col-md-8">
          <h2>Alert-based Settings<a class="help" href="user-manual.html#alerts-fine-tuning"><span class="icon-help-circled"/></a></h2>
          <p>For every emitted alert, some global alerts settings can be
           overriden with the following settings.
           Settings are evaluated from top to bottom. If several settings
           match the alert, the first one is taken into account.
           Delays are in seconds.
          <p><a class="btn btn-primary" href="../rest/v1/alerts_settings/list.csv"><i class="icon-file-excel"></i> CSV</a>
          <a class="btn btn-primary" href="../rest/v1/alerts_settings/list.html"><i class="icon-file-html"></i> HTML</a>
          <p><?view:alertsettings?>
        </div>
        <div class="col-md-4">
          <h2>Global Settings<a class="help" href="user-manual.html#alerts-fine-tuning"><span class="icon-help-circled"/></a></h2>
          <p>These settings are used by default if not overriden by alert pattern.
          Delays are in seconds.
          <p><table class="table table-condensed table-hover">
            <tr><th>Rise Delay</th><td><?=%2?></td></tr>
            <tr><th>Mayrise Delay</th><td><?=%3?></td></tr>
            <tr><th>Drop Delay</th><td><?=%4?></td></tr>
            <tr><th>Duplicate Emit Delay</th><td><?=%8?></td></tr>
            <tr><th>Minimum Delay Between Send</th><td><?=%5?></td></tr>
            <tr><th>Delay Before First Send</th><td><?=%6?></td></tr>
            <tr><th>Remind Period</th><td><?=%7?></td></tr>
          </table>  
        </div>
      </div>
      <div class="row">
      <div class="col-md-12">
        <h2>Alerter Stats</h2>
        <p><table class="table table-condensed table-hover">
          <tr><th>&nbsp;</th><th>Total Requests</th><th>Immediate Requests</th><th>Notifications</th></tr>
          <tr><th>Raise</th><td><?=%{alerter.raiserequestscounter}?></td><td><?=%{alerter.raiseimmediaterequestscounter}?></td><td><?=%{alerter.raisenotificationscounter}?></td></tr>
          <tr><th>Cancel</th><td><?=%{alerter.cancelrequestscounter}?></td><td><?=%{alerter.cancelimmediaterequestscounter}?></td><td><?=%{alerter.cancelnotificationscounter}?></td></tr>
          <tr><th>Emit</th><td><?=%{alerter.emitrequestscounter}?></td><td>&nbsp;</td><td><?=%{alerter.emitnotificationscounter}?></td></tr>
          <tr><th>Per Channel</th><td>&nbsp;</td><td>&nbsp;</td><td><?=%{alerter.totalchannelsnotificationscounter}?></td></tr>
          <tr><th>&nbsp;</th><th>Total Requests</th><th>&nbsp;</th><th>Updates</th></tr>
          <tr><th>To Gridboards</th><td><?=%{gridboards.evaluationscounter}?></td><td>&nbsp;</td><td><?=%{gridboards.updatescounter}?></td></tr>
        </table>
        <p><table class="table table-condensed table-hover">
          <tr><th>Rules Cache Size (current)</th><td><?=%{alerter.rulescachesize}?></td></tr>
          <tr><th>Rules Cache Size (high water mark)</th><td><?=%{alerter.rulescachehwm}?></td></tr>
          <tr><th>Deduplicating Alerts Count (current)</th><td><?=%{alerter.deduplicatingalertscount}?></td></tr>
          <tr><th>Deduplicating Alerts Count (high water mark)</th><td><?=%{alerter.deduplicatingalertshwm}?></td></tr>
          <tr><th>Alerts Subscriptions Count</th><td><?=%{alerter.alertsubscriptionscount}?></td></tr>
          <tr><th>Alerts Settings Count</th><td><?=%{alerter.alertsettingscount}?></td></tr>
        </table>
      </div>
      </div>
     </div>

<?include:common-scripts.html?>
<script>
anchors.add('h2');
</script>
<?include:footer.html?>
